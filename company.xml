<Schema name="hello">
    <Cube name="Sales">
        <!--  事实表(fact table)  -->
        <Table name="sale"/>
        <!--  客户维  -->
        <Dimension name="cusGender" foreignKey="cusId">
            <Hierarchy hasAll="true" allMemberName="allGender" primaryKey="cusId">
                <Table name="customer"/>
                <Level name="gender" column="gender"/>
            </Hierarchy>
        </Dimension>
        <!--  产品类别维  -->
        <Dimension name="protype" foreignKey="proId">
            <Hierarchy hasAll="true" allMemberName="allPro" primaryKey="proId" primaryKeyTable="product">
                <join leftKey="protypeId" rightKey="protypeId">
                    <Table name="product"/>
                    <Table name="producttype"/>
                </join>
                <Level name="protypeId" column="protypeId" nameColumn="protypeName" uniqueMembers="true" table="producttype"/>
                <Level name="proId" column="proId" nameColumn="proName" uniqueMembers="true" table="product"/>
            </Hierarchy>
        </Dimension>
        <Measure name="numb" column="number" aggregator="sum" datatype="Numeric"/>
        <Measure name="totalSale" aggregator="sum" formatString="$ #,##0.00">
            <!--  unitPrice*number所得值的列  -->
            <MeasureExpression>
                <SQL dialect="generic">unitPrice*number</SQL>
            </MeasureExpression>
        </Measure>
        <CalculatedMember name="averPri" dimension="Measures">
            <Formula>[Measures].[totalSale] / [Measures].[numb]</Formula>
            <CalculatedMemberProperty name="FORMAT_STRING" value="$ #,##0.00"/>
        </CalculatedMember>
    </Cube>
</Schema>